# maskUtils

This module adds a few mask utilities. To set it up in the hscPipe environment, run
```
setup -v -j -r path/to/maskUtils
```

## drawRandoms.py

Creates a random catalogue for a given patch:
```
 drawRandoms.py DATADIR --rerun RERUNDIR --id tract=TRACT patch=PATCH filter=HSC-{G,R,I,Z,Y} --config Nden=100  fileOutName=ran.fits
```

Nden controls the numberdensity  of random points per sq. arcmin  (default is 100).
N controls the number of random points per patch (default is
100000). Supersedes Nden is set. Warning: patch size may not be
constant (even inside same tract)

fileOutName is the name (with full path) of the output fits file (default is ran.fits).

Below is the current masking information generated by the pipeline (v 3.6.1):

| Label |	Meaning (Note that there is no order to these)|
| ------------- |-------------| -----|
| BAD	| Pixel is physically bad (a known camera defect) |
| CR |	Cosmic Ray hit  |
| CROSSTALK	| Pixel location affected by crosstalk (and corrected)  |
| EDGE   | Near the CCD edge  |
| INTERPOLATED	| Pixel contains a value based on interpolation from neighbours.  |
| INTRP| 	(same as INTERPOLATED)  |
| SATURATED	| Pixel flux exceeded full-well  |
| SAT	| (same as SATURATED)  |
| SUSPECT	| Pixel is nearly saturated. It may not be well corrected for non-linearity.  |
| UNMASKEDNAN	| A NaN occurred in this pixel in ISR (instrument signature removal - bias,flat,etc) |
| DETECTED	| Pixel is part of a source footprint (a detected source) |
| DETECTED\_NEGATIVE	 | Pixel is part of a negative source footprint (in difference image)|
| CLIPPED| 	(Coadd only) Co-addition process clipped 1 or 2 (but not more) input pixels|
| NO_DATA	| (Coadd only) Pixel has no input data (between CCDs, beyond edge of frame)|

See documentation for masks [here](http://hsca.ipmu.jp/hscsphinx/pipeline_tools.html#masks)
